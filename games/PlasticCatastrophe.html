<!DOCTYPE html>
<html>
<head>
<title> Plastic Catastrophe </title>
<link rel="icon" type="image/png" href="../images/favicon.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="../css/style.css" />
</head>
<body>
	<ul class="topnav">
		<li><a href="../index.html">Home</a></li>
		<li><a href="../index.html#About">About</a></li>
		<li><a href="../index.html#Projects">Projects</a></li>
		<li><a href="../index.html#Contact">Contact</a></li>
	</ul>

<div  class="emptydiv" id="Top"></div>

<div class=contentlarge>
	<h1>Plastic Catastrophe</h1>
	<h4>An augmented reality game where the player trains animals and cleans up the environment</h4>
	<br>
	<img src="../images/Plastic_Catastrophe_Splashscreen_V.1.jpg" width="75%" align="middle">
	<br>
	<h3>Current Features</h3>
	<ul>
		<li><p>Inventory and shop system.</p></li>
		<li><p>Virtual map that tracks the player's location using GPS.</p></li>
		<li><p>Character selection and leveling</p></li>
	</ul>
</div>

<div class="contentlarge" style="background-color: #16213E">
	<h3>About the project</h3>
	<p>This project was made during my study at the Hanzehogeschool, the goal of the project was to raise the awareness of plastic pollution.<br>
	Since plastic waste decomposes very slowly and tons of it eventually ends up in bodies of water, our main focus was on nature in and around water.</p>
	<p>The game itself was made in a team of 7: 3 artists, 2 designers and another programmer. In this project I worked on the GPS map, minigames, character selection & leveling, Item spawning and the pollution system among other things.<br></p>
	<br>
	<img src="../images/PCMap.PNG" width="20%" align="middle">
	<br><br>
	<p>
		The game is made for mobile devices and uses the device's GPS to place the player in the right position of the virtual map. <br>
		The map itself was made using the Mapbox SDK for Unity, this package allowed us to customize how the map looked in game and leave out redundant information like location names.<br>
	</p>
	<p>
		The goal of the game is to clean up the environment with a selection of animals, waste items will spawn on the map around the player as they walk around which the player can interact with.<br>
		A minigame will start when the player interacts with an item, this minigame needs to be won to succesfully pick up that item.<br>
		The minigame the player needs to play depends on the lead animal which the player selected. There currently are 3 animals in the game: Seagul, Seal and Turtle, each animal has its own minigame as well: the seagul's minigame focuses on getting the right timing to drop the item in the basket, the seal needs to be held upright as it balances the item towards the basket and the turtle needs to aim his slingshot to hit the target.<br>
		After completing the minigame, the player receives the item and the lead animal receives experience based on the dangers that item poses to its species. 
	</p>
	
	<h3 id="Block1">Character system</h3>
	<p>
        The functions below manage the character switching and data. The Character is set by the SetChar function, this function will start by saving the data from the previous character and loading de data for the new one.<br>
         It also calculates fow much time has passed since the new animal was last used to determine the amount of energy the animal has recovered, as well the amount of health the animal has based on its level.
    </p>
    <p>
        At the end SpawnCharacter funtion is called, this function removes the previous animal model and replaces it with the chosen animal. 
    </p>

	<div class=CodeWindow>
		<a href="../samples/PCCharSystem.html" class="previewLink">
			<div><p>Character script(Click for full view)</p></div>
		</a>
		<pre class="Preview">
		
//sets the selected character based on character's ID value;
public void SetChar(int CharID){

    System.DateTime epochStart = new System.DateTime(1970, 1, 1, 0, 0, 0, System.DateTimeKind.Utc);

    if (CurrentChar.Name != "")
    {
        CurrentChar.LastUsed = (int)(System.DateTime.UtcNow - epochStart).TotalSeconds;
        SaveSystem.SaveAnimalData(CurrentChar);
    }

    CurrentChar = GameManager.Instance.CharList[CharID];

    //looks for a save for the animal, if not found, creates a new, default one.
    if (SaveSystem.LoadAnimalData(CurrentChar) == null)
    {
        Debug.Log("&lt;color=green&gt;Creating new save for character ID: " + CurrentChar.ID + " Name: " + CurrentChar.Name + "&lt;/color&gt;");
        CurrentChar.NextLevelReq = CurrentChar.BaseLevelReq;
        SaveSystem.SaveAnimalData(CurrentChar);
    }else
    {
        //loads save data
        AnimalSaveData data = SaveSystem.LoadAnimalData(CurrentChar);

        //sets loaded values
        SetPerk(data.Perk, false);
        CurrentChar.Name = data.Name;
        CurrentChar.Level = data.Level;
        CurrentChar.Exp = data.Exp;
        CurrentChar.NextLevelReq = data.NextLevelReq;
        CurrentChar.Energy = data.Energy;
        CurrentChar.LastUsed = data.TimeStamp;

        for (int i = 0; i &lt; data.PerksUnlocked.Length; i++)
        {
            CurrentChar.PerkList[i].Unlocked = data.PerksUnlocked[i];
        }

        if (CurrentChar.CurrentPerk != null && CurrentChar.CurrentPerk.modifier == PerkModifiers.EnergyModifier)
        {
            maxHealth = Mathf.CeilToInt((100 + (CurrentChar.Level * 5)) * CurrentChar.CurrentPerk.value);
        }
        else
        {
            maxHealth = 100 + (CurrentChar.Level * 5);
        }

        //adds more energy that recharged over time
        if (data.TimeStamp != 0)
        {
            Debug.Log(((((float)(System.DateTime.UtcNow - epochStart).TotalSeconds - data.TimeStamp) / 60) / 60) * 8);
            if (CurrentChar.CurrentPerk != null && CurrentChar.CurrentPerk.modifier == PerkModifiers.EnergyRecoveryModifier)
            {
                CurrentChar.Energy += (((((float)(System.DateTime.UtcNow - epochStart).TotalSeconds - data.TimeStamp) / 60) / 60) * 8) * CurrentChar.CurrentPerk.value;
            }
            else
            {
                CurrentChar.Energy += ((((float)(System.DateTime.UtcNow - epochStart).TotalSeconds - data.TimeStamp) / 60) /60) * 8;
            }

            if (CurrentChar.Energy &gt; maxHealth)
            {
                CurrentChar.Energy = maxHealth;
            }
        }
        UpdateMaxhealth();
        Updatehealth();
        currentXP = CurrentChar.Exp;
    }
    xp.SetMaxXP(CurrentChar.NextLevelReq);
    xp.SetXP(CurrentChar.Exp);
    Portrait.sprite = CurrentChar.Portrait;
    SpawnCharacter();
}

//Spawns character and removes the previous one.
void SpawnCharacter(bool ClearPrevious = true)
{
    if (ClearPrevious)
    {
        foreach (Transform child in CharContainer.transform)
        {
            Destroy(child.gameObject);
        }
    }

    Instantiate(CurrentChar.Prefab, CharContainer.transform);
}
		
		</pre>
	</div>

</div>
</div>

</body>
</html>
